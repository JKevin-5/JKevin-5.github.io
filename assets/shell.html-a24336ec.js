import{_ as a,p as s,q as n,a1 as e}from"./framework-df18c678.js";const i={},l=e(`<div class="custom-container tip"><p class="custom-container-title">TIP</p><p>用于记录常用的sh命令。</p></div><h2 id="一、查看系统配置" tabindex="-1"><a class="header-anchor" href="#一、查看系统配置" aria-hidden="true">#</a> 一、查看系统配置</h2><h3 id="_1、查看系统各分区使用情况" tabindex="-1"><a class="header-anchor" href="#_1、查看系统各分区使用情况" aria-hidden="true">#</a> 1、查看系统各分区使用情况</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">df</span> <span class="token parameter variable">-h</span>
lsblk
<span class="token function">df</span> <span class="token parameter variable">-Th</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、查看系统内核版本-系统" tabindex="-1"><a class="header-anchor" href="#_2、查看系统内核版本-系统" aria-hidden="true">#</a> 2、查看系统内核版本（系统）</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> /etc/os-release
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3、查看cpu" tabindex="-1"><a class="header-anchor" href="#_3、查看cpu" aria-hidden="true">#</a> 3、查看cpu</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>lscpu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4、查看内存大小" tabindex="-1"><a class="header-anchor" href="#_4、查看内存大小" aria-hidden="true">#</a> 4、查看内存大小</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">free</span> <span class="token parameter variable">-h</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_5、压缩文件" tabindex="-1"><a class="header-anchor" href="#_5、压缩文件" aria-hidden="true">#</a> 5、压缩文件</h3><p>脚本sh，需要给脚本加上权限。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh </span>
<span class="token assign-left variable">date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">date</span> +<span class="token string">&quot;%Y%m%d&quot;</span><span class="token variable">\`</span></span> 
<span class="token function">tar</span> <span class="token parameter variable">-czvf</span> /opt/ftp/soft_<span class="token variable">$date</span>.tar.gz /usr/soft
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用crontab进行定期执行</p><h3 id="_6、解压文件" tabindex="-1"><a class="header-anchor" href="#_6、解压文件" aria-hidden="true">#</a> 6、解压文件</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gzip</span> <span class="token parameter variable">-d</span> filename
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_7、查看文件夹的大小" tabindex="-1"><a class="header-anchor" href="#_7、查看文件夹的大小" aria-hidden="true">#</a> 7、查看文件夹的大小</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">du</span> <span class="token parameter variable">-sh</span> 文件夹名
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_8、查看开机自启项目" tabindex="-1"><a class="header-anchor" href="#_8、查看开机自启项目" aria-hidden="true">#</a> 8、查看开机自启项目</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl list-unit-files <span class="token operator">|</span> <span class="token function">grep</span> xxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_9、查看进程" tabindex="-1"><a class="header-anchor" href="#_9、查看进程" aria-hidden="true">#</a> 9、查看进程</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> jenkins
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_10、杀死进程" tabindex="-1"><a class="header-anchor" href="#_10、杀死进程" aria-hidden="true">#</a> 10、杀死进程</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">kill</span> <span class="token parameter variable">-9</span> xxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="二、小项目" tabindex="-1"><a class="header-anchor" href="#二、小项目" aria-hidden="true">#</a> 二、小项目</h2><h3 id="_1、定期删除log" tabindex="-1"><a class="header-anchor" href="#_1、定期删除log" aria-hidden="true">#</a> 1、定期删除log</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash -x</span>
<span class="token comment"># 系统日志匹配名称</span>
<span class="token assign-left variable">access_log</span><span class="token operator">=</span><span class="token string">&quot;access*..log&quot;</span>
<span class="token assign-left variable">server_log</span><span class="token operator">=</span><span class="token string">&quot;server.log.*&quot;</span>
<span class="token assign-left variable">gc_log</span><span class="token operator">=</span><span class="token string">&quot;gc_*.log.0.current&quot;</span>
<span class="token comment"># 间隔时间</span>
<span class="token assign-left variable">gap_time</span><span class="token operator">=</span><span class="token string">&quot;100&quot;</span>
<span class="token comment"># 系统日志地址</span>
<span class="token assign-left variable">qms_log_path</span><span class="token operator">=</span><span class="token string">&quot;/usr/local/services/xxxx/log&quot;</span>
<span class="token comment">#filepath is exist</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">$qms_log_path</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> start delete log <span class="token variable">$gap_time</span> days ago<span class="token punctuation">..</span>.<span class="token punctuation">;</span>
  <span class="token function">find</span> <span class="token variable">$qms_log_path</span>/* <span class="token parameter variable">-name</span> <span class="token string">&quot;<span class="token variable">$access_log</span>&quot;</span> <span class="token parameter variable">-mtime</span> +<span class="token variable">$gap_time</span> <span class="token parameter variable">-type</span> f -delete<span class="token punctuation">;</span>
  <span class="token function">find</span> <span class="token variable">$qms_log_path</span>/* <span class="token parameter variable">-name</span> <span class="token string">&quot;<span class="token variable">$server_log</span>&quot;</span> <span class="token parameter variable">-mtime</span> +<span class="token variable">$gap_time</span> <span class="token parameter variable">-type</span> f -delete<span class="token punctuation">;</span>
  <span class="token function">find</span> <span class="token variable">$qms_log_path</span>/* <span class="token parameter variable">-name</span> <span class="token string">&quot;<span class="token variable">$gc_log</span>&quot;</span> <span class="token parameter variable">-mtime</span> +<span class="token variable">$gap_time</span> <span class="token parameter variable">-type</span> f -delete<span class="token punctuation">;</span>
  <span class="token comment"># add this</span>
  <span class="token builtin class-name">echo</span> end delete log<span class="token punctuation">..</span>.
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> can not <span class="token function">find</span> the file, please check
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,27),t=[l];function r(c,p){return s(),n("div",null,t)}const o=a(i,[["render",r],["__file","shell.html.vue"]]);export{o as default};
